<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LED Effect Tester</title>

    <style>
      * {
        box-sizing: border-box;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;

        height: 100vh;

        padding: 20px;
        margin: 0;

        background: #222;
      }

      #leds {
        display: flex;
        flex: 0 0 100%;
        gap: 2px;

        width: 500px;
        height: 10px;
      }

      .led {
        flex: 1 1 auto;
        height: 100%;
      }
    </style>

    <!-- Update effect class to import here -->
    <script src="../effects/RGBStrobeEffect.js"></script>
  </head>
  <body>
    <div id="leds"></div>

    <script>
      const numLeds = 60;
      const colorArray = Array(numLeds).fill(0xff0000);
      const leds = document.querySelector("#leds");
      const interval = 100;

      function render() {
        let ledMarkup = "";

        colorArray.forEach((hexNum) => {
          const hexStr = hexNum.toString(16);
          const hexColor = hexStr.padStart(6, "0");
          ledMarkup += `<div class="led" style="background:#${hexColor};"></div>`;
        });

        leds.innerHTML = ledMarkup;
      }

      const effect = new RGBStrobeEffect(colorArray);

      setInterval(() => {
        effect.compute();
        render();
      }, interval);
    </script>
  </body>
</html>
