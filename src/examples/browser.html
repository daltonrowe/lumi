<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        background: #222;
      }

      #leds {
        display: flex;
        flex: 0 0 100%;
        width: 500px;
        height: 10px;
      }

      .led {
        flex: 1 1 auto;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="leds"></div>

    <script>
      const numLeds = 60;
      const colorArray = Array(numLeds).fill(0xff0000);
      const leds = document.querySelector("#leds");
      const interval = 150;

      function render() {
        let ledMarkup = "";

        colorArray.forEach((hexNum) => {
          const hexStr = hexNum.toString(16);
          const hexColor = hexStr.padStart(6, "0");
          ledMarkup += `<div class="led" style="background:#${hexColor};"></div>`;
        });

        leds.innerHTML = ledMarkup;
      }

      class LedEffect {
        counter = 0;
        numLeds = 0;
        colorArray = undefined;

        constructor(colorArray) {
          this.colorArray = colorArray;
          this.numLeds = colorArray.length;
        }

        getColor() {
          switch (this.counter) {
            case 0:
              return 0xff0000;

            case 1:
              return 0x00ff00;

            case 2:
              return 0x0000ff;

            default:
              return 0xffcc22;
          }
        }

        update() {
          for (let i = 0; i < this.numLeds; i++) {
            this.colorArray[i] = this.getColor();
          }
        }

        count() {
          this.counter >= 2 ? (this.counter = 0) : this.counter++;
        }

        compute() {
          this.update();
          this.count();
          return this.colorArray;
        }
      }

      const effect = new LedEffect(colorArray);

      setInterval(() => {
        effect.compute();
        render();
      }, interval);
    </script>
  </body>
</html>
